<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%><%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%><!-- 查询条件 --><div class="bg-query-head" style="font-size:20px;color:#00BFF4">&nbsp;查询条件</div><div class="row">	<div class="col-xs-12">		<form class="form-horizontal" role="form" id="formQuery" name="formQuery" >			<div class="form-group">				<label class="font-title col-sm-1 control-label no-padding-right"					   for="queryClientName">客户名称</label>				<div class="col-sm-2">					<input type="text" id="queryClientName" name="queryClientName" class="input-text col-xs-12" />				</div>				<label class="font-title col-sm-1 control-label no-padding-right"					   for="queryClientPhone">联系方式</label>				<div class="col-sm-2">					<input type="text" id="queryClientPhone" name="queryClientPhone" class="input-text col-xs-12" />				</div>				<label class="font-title col-sm-1 control-label no-padding-right"					   for="querySourceMemo">客户来源</label>				<div class="col-sm-2">					<input type="text" id="querySourceMemo" name="querySourceMemo" class="input-text col-xs-12" />				</div>				<label class="font-title col-sm-1 control-label no-padding-right"					   for="queryClientLevel">客户等级</label>				<div class="col-sm-2">					<select id="customerType">						<option value=""></option>						<option value="dealt">成交客户</option>						<option value="hidden">潜在客户</option>						<option value="channel">渠道</option>					</select>					<select id="queryClientLevel" name="queryClientLevel"							class="dialog-control" required >						<!-- 类别选项将根据JavaScript动态添加 -->					</select>				</div>			</div>			<div class="form-group"><%--				<label class="font-title col-sm-1 control-label no-padding-right"--%><%--					   for="queryAssignUserName">角色</label>--%><%--				<div class="col-sm-2">--%><%--					<select id="queryAssignUserName" name="queryAssignUserName" class="form-control col-xs-9" required >--%><%--						<option value=""></option>--%><%--						<c:forEach var="item" items="${userInfos}">--%><%--							<option value="${item.userName}">${item.userName}</option>--%><%--						</c:forEach>--%><%--					</select>--%><%--				</div>--%>				<label class="font-title col-sm-1 control-label no-padding-right"					   for="queryRegisterTimeBegin">注册时间</label>				<div class="col-sm-4 input-append date form_datetime">					<input type="text" id="queryRegisterTimeBegin" name="queryRegisterTimeBegin" size="20" type="text" />					<span class="addon"> <i class="fa fa-clock-o"></i></span> 到					<input type="text" id="queryRegisterTimeEnd" name="queryRegisterTimeEnd" size="20" type="text" />					<span class="addon"> <i class="fa fa-clock-o"></i></span>				</div>			</div>			<div class="form-group">				<label class="font-title col-sm-1 control-label no-padding-right"					   for="queryClientPhone">客户动态</label>				<div class="col-sm-4">					<div class="radio">						<label>							<input name="radioQueryType" id="radioQueryTypeAll"  type="radio" value="all" class="ace" checked  />							<span class="lbl">所有</span>						</label>						<label>							<input name="radioQueryType" id="radioQueryTypeMonthNew"  type="radio" value="monthNew" class="ace" />							<span class="lbl">本月新增客户</span>						</label>						<label>							<input name="radioQueryType" id="radioQueryTypeMonthTransacted" type="radio" value="monthTransacted" class="ace" />							<span class="lbl">本月已成交客户</span>						</label>						<label>							<input name="radioQueryType" id="radioQueryTypeUnrevisit" type="radio" value="unrevisit" class="ace" />							<span class="lbl">本月未成交客户</span>						</label>					</div>				</div>				<div style="text-align: right; float: right;">					<button id="btnQuery" class="btn btn-purple btn-sm">查询</button>					<button id="btnAdd"   class="btn-op btn btn-sm btn-primary">新增</button>					<button id="btnImport" class="btn-sm btn">导入</button>				</div>			</div>		</form>	</div></div><div class="hr hr-18 dotted hr-double"></div><!-- 表格工具栏 --><div class="clearfix">	<div class="pull-right tableTools-container"></div></div><!-- div.dataTables_borderWrap --><!-- 数据表格 --><div class="bg-table-header table-header">查询结果</div><table id="dynamic-table" class="table table-hover">	<thead>	<tr>		<th class="bg-table-header center">			<label class="pos-rel">				<input type="checkbox" class="ace" />				<span class="lbl"></span>			</label>		</th>		<th class="bg-table-header">客户名称</th>		<th class="bg-table-header">联系人</th>		<th class="bg-table-header">客户等级</th>		<th class="bg-table-header">注册时间</th>		<th class="bg-table-header">客户来源</th>		<th class="bg-table-header">操作时间</th>		<th class="bg-table-header">操作人</th><%--		<th class="bg-table-header center">详细信息</th>--%><%--		<th class="bg-table-header center">客户关联</th>--%>		<th class="bg-table-header center">客户跟进</th><%--		<th class="bg-table-header center">客户回访</th>--%>		<th class="bg-table-header center">操作</th>	</tr>	</thead>	<tfoot></tfoot></table><%--扩展信息框--%><div id="divExtendForm" class="modal" tabindex="-1">	<div class="modal-dialog" style="width:1000px;height:750px">		<div class="modal-content">			<div class="modal-header" style="border:none" >				<button type="button" class="close" data-dismiss="modal">					<span style="color:#93ADE2">&times;</span>&nbsp;&nbsp;&nbsp;&nbsp;				</button>				<h3 class="blue bigger" style="color:#DFE9FE">&nbsp;&nbsp;扩展信息</h3>			</div>			<div class="modal-body">				<div class="row">					<form id="formExtend" class="form-horizontal" role="form" >						<input type="hidden" id="hidden_ClientId" name="hiddenClientId" />						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendClientName">客户名称(*)</label>							<div class="col-sm-4">								<input type="text" id="extendClientName" name="extendClientName"									   class="dialog-control col-xs-10" required disabled="disabled"/>							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientLevel">客户等级(*)</label>							<div class="col-sm-4">								<input type="text" id="extendClientLevel" name="extendClientLevel"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientContacts">客户联系人</label>							<div class="col-sm-4">								<input type="text" id="extendClientContacts" name="extendClientContacts"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientPhone">客户电话(*)</label>							<div class="col-sm-4">								<input type="text" id="extendClientPhone" name="extendClientPhone"									   class="dialog-control col-xs-10" required disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientState">客户状态(*)</label>							<div class="col-sm-4">								<input type="text" id="extendClientState" name="extendClientState"										class="dialog-control col-xs-10" required disabled="disabled"/>							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientEmail">客户邮箱</label>							<div class="col-sm-4">								<input type="text" id="extendClientEmail" name="extendClientEmail"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientType">客户类型(*)</label>							<div class="col-sm-4">								<input type="text" id="extendClientType" name="extendClientType"									   class="dialog-control col-xs-10" required disabled="disabled"/>							</div>							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendClientWeixin">客户微信</label>							<div class="col-sm-4">								<input type="text" id="extendClientWeixin" name="extendClientWeixin"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientZipCode">客户邮政编码</label>							<div class="col-sm-4">								<input type="text" id="extendClientZipCode" name="extendClientZipCode"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientAddress">客户地址</label>							<div class="col-sm-4">								<input type="text" id="extendClientAddress" name="extendClientAddress"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientAccount">客户账号</label>							<div class="col-sm-4">								<input type="text" id="extendClientAccount" name="extendClientAccount"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientBank">客户开户行</label>							<div class="col-sm-4">								<input type="text" id="extendClientBank" name="extendClientBank"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendSourceTable">来源数据表</label>							<div class="col-sm-4">								<input type="text" id="extendSourceTable" name="extendSourceTable"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendSourceMemo">客户来源</label>							<div class="col-sm-4">								<input type="text" id="extendSourceMemo" name="extendSourceMemo"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendLegalRepresentative">法定代表人</label>							<div class="col-sm-4">								<input type="text" id="extendLegalRepresentative" name="extendLegalRepresentative"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendLegalMoney">注册资本</label>							<div class="col-sm-4">								<input type="text" id="extendLegalMoney" name="extendLegalMoney"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendLegalTime">公司注册时间</label>							<div class="col-sm-4">								<input type="date" id="extendLegalTime" name="extendLegalTime"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendInsuredNumber">参保人数</label>							<div class="col-sm-4">								<input type="text" id="extendInsuredNumber" name="extendInsuredNumber"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendBusinessScope">经营范围</label>							<div class="col-sm-4">								<input type="text" id="extendBusinessScope" name="extendBusinessScope"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendEquityConstituent">股权构成</label>							<div class="col-sm-10">								<textarea id="extendEquityConstituent" name="extendEquityConstituent" class="form-control col-xs-8" rows="3" disabled="disabled"></textarea>							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendBiddingMemo">招标信息</label>							<div class="col-sm-10">								<textarea id="extendBiddingMemo" name="extendBiddingMemo" class="form-control col-xs-8" rows="3" disabled="disabled"></textarea>							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendParttimeMemo">企业名下资产/股东和企业对外投资任职情况</label>							<div class="col-sm-10">								<textarea id="extendParttimeMemo" name="extendParttimeMemo" class="form-control col-xs-8" rows="3" disabled="disabled"></textarea>							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="extendLawMemo">诉讼情况</label>							<div class="col-sm-10">								<textarea id="extendLawMemo" name="extendLawMemo" class="form-control col-xs-8" rows="3" disabled="disabled"></textarea>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="extendClientMemo">客户备注</label>							<div class="col-sm-10">							    <textarea id="extendClientMemo" name="extendClientMemo" class="form-control col-xs-8" rows="3" disabled="disabled"></textarea>							</div>						</div>					</form>				</div>			</div>		</div>	</div></div><%--新增客户框--%><div id="divInputForm" class="modal" tabindex="-1">	<div class="modal-dialog" style="width:1000px;height:750px">		<div class="modal-content">			<div class="modal-header" style="border:none" >				<button type="button" class="close" data-dismiss="modal">					<span style="color:#93ADE2">&times;</span>&nbsp;&nbsp;&nbsp;&nbsp;				</button>				<h4 class="blue bigger" style="color:#DFE9FE">&nbsp;&nbsp;请输入</h4>			</div>			<div class="modal-body">				<div class="row widget-main">					<form id="formInput" class="form-horizontal" role="form" >						<input type="hidden" id="hiddenClientId" name="hiddenClientId" />						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="inputClientName">客户名称(*)</label>							<div class="col-sm-4">								<input type="text" id="inputClientName" name="inputClientName"									   class="dialog-control col-xs-10" required />							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="inputClientLevel">客户等级(*)</label>							<div class="col-sm-4">								<select id="inputClientLevel" name="inputClientLevel"										class="dialog-control col-xs-10" required >									<option></option>									<option>渠道</option>									<option>潜在客户-普通</option>									<option>潜在客户-线索</option>									<option>潜在客户-商机</option>									<option>成交-VIP法律顾问</option>									<option>成交-VIP税务顾问</option>									<option>成交-法律专项</option>									<option>成交-税务专项</option>									<option>成交-其他</option>								</select>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="inputClientContacts">联系人(*)</label>							<div class="col-sm-4">								<input type="text" id="inputClientContacts" name="inputClientContacts"									   class="dialog-control col-xs-10" required/>							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="inputClientPhone">联系方式(*)</label>							<div class="col-sm-4">								<input type="text" id="inputClientPhone" name="inputClientPhone"									   class="dialog-control col-xs-10" required />							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="inputCeo">决策人</label>							<div class="col-sm-4">								<input type="text" id="inputCeo" name="inputCeo"									   class="dialog-control col-xs-10" />							</div>							<label class="font-title col-sm-2 control-label no-padding-right"								   for="inputCeoPhone">联系方式</label>							<div class="col-sm-4">								<input type="text" id="inputCeoPhone" name="inputCeoPhone"									   class="dialog-control col-xs-10" />							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="selectClientType">客户类型</label>							<div class="col-sm-4">								<select id="selectClientType" name="selectClientType"										class="dialog-control col-xs-10" >									<option></option>									<option>个人</option>									<option>公司</option>								</select>							</div>							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="inputSourceMemo">客户来源</label>							<div class="col-sm-4">								<input type="text" id="inputSourceMemo" name="inputSourceMemo"									   class="dialog-control col-xs-10" />							</div>						</div>						<div class="form-group">							<label class="dialog-label col-sm-2 control-label no-padding-right"								   for="inputRegisterTime">注册时间</label>							<div class="col-sm-4">								<input type="text" id="inputRegisterTime" name="inputRegisterTime"									   class="dialog-control col-xs-10" disabled="disabled"/>							</div>						</div>						<div class="form-group">							<label class="font-title col-sm-2 control-label no-padding-right"								   for="inputClientMemo">客户备注</label>							<div class="col-sm-10">							     <textarea id="inputClientMemo" name="inputClientMemo" class="form-control col-xs-8" rows="3"></textarea>							</div>						</div>					</form>				</div>			</div>			<div class="footer-dialog modal-footer" style="">				<button id="btnCancel" class="btn-op btn btn-sm btn-primary" data-dismiss="modal">					<i class="ace-icon fa fa-times"></i> 取消				</button>				<button id="btnOk" class="btn-op btn btn-sm btn-primary">					<i class="ace-icon fa fa-check"></i> 保存				</button>			</div>		</div>	</div></div><%--导入excel框--%><div id="divImportForm" class="modal" tabindex="-1">	<div class="modal-dialog" style="width:1000px;height:750px">		<div class="modal-content">			<div class="modal-header" style="border:none" >				<button type="button" class="close" data-dismiss="modal">					<span style="color:#93ADE2">&times;</span>&nbsp;&nbsp;&nbsp;&nbsp;				</button>				<h4 class="blue bigger" style="color:#DFE9FE">&nbsp;&nbsp;请选择上传文件</h4>			</div>			<div class="modal-body">				<div class="row widget-main">					<form id="formExcel" class="form-horizontal" role="form" >						<div class="form-group ">							<input type="hidden" id="hiddenClientInfoId" name="hiddenClientInfoId" />							<input type="file" id="excelImport" class="col-sm-6 ">						</div>						<div class="footer-dialog modal-footer" style="">							<button id="excelButton" class="upload-btn btn btn-sm btn-primary">上传Excel表格</button>							<button id="btnCancel" class="btn-op btn btn-sm btn-primary" data-dismiss="modal">							<i class="ace-icon fa fa-times"></i> 取消							</button>						</div>					</form>				</div>			</div>		</div>	</div></div><script type="text/javascript">	//1-声明表格对象	var dataTableObj = null;	$(function() {		//0-设置单选按钮初始值        <c:if test="${queryType!=null && queryType=='monthNew' }">        	$("#radioQueryTypeMonthNew").attr("checked",true);        </c:if>        <c:if test="${queryType!=null && queryType=='monthTransacted' }">	    	$("#radioQueryTypeMonthTransacted").attr("checked",true);	    </c:if>	    <c:if test="${queryType!=null && queryType=='unrevisit' }">	    	$("#radioQueryTypeUnrevisit").attr("checked",true);	    </c:if>	    //单选按钮绑定事件处理		$("input[name='radioQueryType']").change(function(){			dataTableObj.ajax.reload(null, true);		});		//1-设置DataTable列		var columnSettings=[ {				"data" : "clientId",				"sClass":"font-title",				"orderable" : false,				"searchable" : false			},			{				"data" : "clientName",				"sClass":"font-title",				"orderable"  : true,				"searchable" : false			},			{				"data" : "clientContacts",				"sClass":"font-title",				"searchable" : false			},			{				"data" : "clientLevel",				"sClass":"font-title",				"searchable" : false			},			{				"data" : "registerTime",				"sClass":"font-title",				"searchable" : false			},			{				"data" : "sourceMemo",				"sClass":"font-title",				"searchable" : false			},			{				"data" : "opTime",				"sClass":"font-title",				"searchable" : false			},			{				"data" : "opUserName",				"sClass":"font-title",				"searchable" : false			},			// {			// 	"data" : "clientId",			// 	"sClass":"font-title",			// 	"orderable"  : false,			// 	"searchable" : false			// },			// {			// 	"data" : "clientId",			// 	"sClass":"font-title",			// 	"orderable"  : false,			// 	"searchable" : false			// },			{				"data" : "clientId",				"sClass":"font-title",				"orderable"  : false,				"searchable" : false			},			// {			// 	"data" : "clientId",			// 	"sClass":"font-title",			// 	"orderable"  : false,			// 	"searchable" : false			// },			{				"data" : "clientId",				"sClass":"font-title",				"orderable"  : false,				"searchable" : false			}];		//2-定义特殊选择列和超链接列		var columnDefs=[{				"targets" : 0,				"data" : "clientId",				"render" : function(						data, type,						row, meta) {					var str = '<div class="bg-table-header center" > <label class="pos-rel">';					str = str							+ '<input type="checkbox" class="ace" value="'+data+'" />';					str = str							+ '<span class="lbl"></span></label> </div>';					return str;				}			},			// {			// 	"targets" :columnSettings.length-5,			// 	"data" : "clientId",			// 	"render" : function(			// 			data, type,			// 			row, meta) {			// 		var str = '<div class="bg-table-header center" >';			// 		str = str			// 				+ '<a href="javascript:clientExtend('			// 				+ meta.row			// 				+ ')" >详细信息</a>';			// 		str = str			// 				+ '</div>'			// 		return str;			// 	}			// },			// {			// 	"targets" :columnSettings.length-4,			// 	"data" : "clientId",			// 	"render" : function(			// 			data, type,			// 			row, meta) {			// 		var str = '<div class="bg-table-header center" >';			// 		str = str			// 				+ '<a href="javascript:clientRelation('			// 				+ meta.row			// 				+ ')" >客户关联</a>';			// 		str = str			// 				+ '</div>'			// 		return str;			// 	}			// },			{				"targets" :columnSettings.length-2,				"data" : "clientId",				"render" : function(						data, type,						row, meta) {					var str = '<div class="bg-table-header center" >';					str = str							+ '<a href="javascript:clientFollow('							+ meta.row							+ ')" >客户跟进</a>';					str = str							+ '</div>'					return str;				}			},			// {			// 	"targets" :columnSettings.length-2,			// 	"data" : "clientId",			// 	"render" : function(			// 			data, type,			// 			row, meta) {			// 		var str = '<div class="bg-table-header center" >';			// 		str = str			// 				+ '<a href="javascript:clientRevisit('			// 				+ meta.row			// 				+ ')" >客户回访</a>';			// 		str = str			// 				+ '</div>'			// 		return str;			// 	}			// },			{				"targets" :columnSettings.length-1,				"data" : "clientId",				"render" : function(						data, type,						row, meta) {					var str = '<div class="bg-table-header center" >';					str = str							+ '<a href="javascript:editObject('							+ meta.row							+ ')" >修改</a>';					str = str							+ '<a href="javascript:deleteObject('							+ data							+ ')" >删除</a>';					str = str							+ '</div>'					return str;				}			}];		//2-客户类型二级搜索下拉框		document.getElementById("customerType").addEventListener("change", function() {			var customerType = this.value;			var categorySelect = document.getElementById("queryClientLevel");			categorySelect.innerHTML = '';			if (customerType === 'dealt') {				var categories = ['','成交-VIP法律顾问', '成交-VIP税务顾问', '成交-法律专项', '成交-税务专项', '成交-其他'];				categories.forEach(function(category) {					var option = document.createElement("option");					if(category === '') {						option.value = '成交';						option.text = '';					} else {						option.value = category;						option.text = category;					}					categorySelect.appendChild(option);				});			}			if (customerType === 'hidden') {				var categories = ['','潜在客户-普通', '潜在客户-线索', '潜在客户-商机'];				categories.forEach(function(category) {					var option = document.createElement("option");					if(category === '') {						option.value = '潜在客户';						option.text = '';					} else {						option.value = category;						option.text = category;					}					categorySelect.appendChild(option);				});			}			if (customerType === 'channel') {				var option = document.createElement("option");				option.value = '渠道客户';				option.text = '';				categorySelect.appendChild(option);			}		});		//3-初始化数据表格		dataTableObj = $('#dynamic-table').DataTable({			"serverSide" : true, //服务器处理：过滤、分页、排序			"processing" : true, //是否显示处理状态			"ajax" : {				url : '../client/clientInfo/',				type : 'get',				data : function(req) {					//1-过滤参数(设置分页参数)					filterRequest(req);					//2-设置请求参数					if($("#queryClientName").val()!="")						req.clientName=$("#queryClientName").val();					if($("#queryClientPhone").val()!="")						req.clientPhone=$("#queryClientPhone").val();					if($("#querySourceMemo").val()!="")						req.sourceMemo=$("#querySourceMemo").val();					if($("#queryClientLevel").val()!="")						req.clientLevel=$("#queryClientLevel").val();					if($("#queryAssignUserName").val()!="")						req.assignUserName=$("#queryAssignUserName").val();					if($("#queryRegisterTimeBegin").val()!="")						req.registerTimeBegin=$("#queryRegisterTimeBegin").val();					if($("#queryRegisterTimeEnd").val()!="")						req.registerTimeEnd=$("#queryRegisterTimeEnd").val();					var queryType=$("input[name='radioQueryType']:checked").val();					console.log("queryType:"+queryType);					if(queryType=="monthNew")						req.isQueryMonthNew=true;					else if(queryType=="monthTransacted")						req.isQueryMonthTransacted=true;					else if(queryType=="unrevisit")						req.isQueryUnrevisit=true;					console.log("init DataTable:"+"${requestPageIndex}");				},				//"dataSrc" : function(json) {				//	return json.data;				//}			}, //获取数据的处理函数			"searching" : false,//搜索功能			"bSort" : true, //排序功能			"order" : [6,'desc'], //默认排序的指标			"aaSorting" : [],			"columns" : columnSettings,			"columnDefs" : columnDefs,			"bFilter" : false, //过滤功能			"bPaginate" : true, //翻页功能			"iDisplayLength": 30,			<c:if test="${requestPageIndex!=null}">				"iDisplayStart":30*"${requestPageIndex}",	        </c:if>			"sPaginationType" : "full_numbers", //分页的格式			"bLengthChange" : false, //改变每页显示数据数量			"bInfo" : true, //页脚信息			"bAutoWidth" : true,//自动宽度			"language" : dataTableLanguage,			"select": {				style: 'multi'			},		});		//4-设置TableTools		initTableTools(dataTableObj);		//5-查询按钮		$('#btnQuery').on('click', function(e) {			dataTableObj.ajax.reload(null, true);			e.preventDefault();		});		//6-新增信息		$('#btnAdd').on('click', function(e) {			$("#hiddenClientId").val(-1);			$("#inputClientName").val("");			$("#inputClientWeixin").val("");			$("#inputClientAddress").val("");			$("#inputClientPhone").val("");			$("#inputClientZipCode").val("");			$("#inputClientContacts").val("");			$("#selectClientType").val("");			$("#inputCeo").val("");			$("#inputCeoPhone").val("");			$("#inputClientEmail").val("");			$("#inputClientAccount").val("");			$("#inputClientBank").val("");			$("#inputClientLevel").val("");			$("#inputClientMemo").val("");			$("#inputClientState").val("");			$("#inputSourceMemo").val("");			$("#inputSourceTable").val("");			$("#inputLegalRepresentative").val("");			$("#inputLegalMoney").val("");			$("#inputLegalTime").val("");			$("#inputInsuredNumber").val("");			$("#inputBusinessScope").val("");			$("#inputEquityConstituent").val("");			$("#inputParttimeMemo").val("");			$("#inputBiddingMemo").val("");			$("#inputLawMemo").val("");			$('#divInputForm').modal();			e.preventDefault();		});		//7-保存信息		$('#btnOk').on('click', function(e) {			//2-窗口验证,成功提交数据			if($("#formInput").valid()==true){				postObject();				e.preventDefault(); //阻止默认事件Post			}		});		//8-设置窗口输入验证		$("#formInput").validate({			rules:{			},			messages:{			},			errorElement: "em",			success:function(em){				$(em).text("").addClass("glyphicon glyphicon-ok-circle success");			},			showErrors:function (errorMap, errorList){				for (var element in errorMap) {					$("#" + element).next("em").removeClass(); //去除success样式和字体图标,不去除会跟错误信息一起出现				}				this.defaultShowErrors();			}		});	});			//扩展信息	function clientExtend(rowIndex) {		if (dataTableObj.data().length <= 0)			return;		if (rowIndex < 0)			return;		var row = dataTableObj.data()[rowIndex];		$("#extendClientId").val(row["clientId"]);		$("#extendClientName").val(row["clientName"]);		$("#extendClientWeixin").val(row["clientWeixin"]);		$("#extendClientAddress").val(row["clientAddress"]);		$("#extendClientPhone").val(row["clientPhone"]);		$("#extendClientZipCode").val(row["clientZipCode"]);		$("#extendClientContacts").val(row["clientContacts"]);		$("#extendClientType").val(row["clientType"]);		$("#extendClientEmail").val(row["clientEmail"]);		$("#extendClientAccount").val(row["clientAccount"]);		$("#extendClientBank").val(row["clientBank"]);		$("#extendClientLevel").val(row["clientLevel"]);		$("#extendRegisterTime").val(row["registerTime"]);		$("#extendClientMemo").val(row["clientMemo"]);		$("#extendClientState").val(row["clientState"]);		$("#extendSourceTable").val(row["sourceTable"]);		$("#extendSourceId").val(row["sourceId"]);		$("#extendSourceMemo").val(row["sourceMemo"]);		$("#extendOpTime").val(row["opTime"]);		$("#extendOpUserName").val(row["opUserName"]);		$("#extendLegalRepresentative").val(row["legalRepresentative"]);		$("#extendLegalMoney").val(row["legalMoney"]);		$("#extendLegalTime").val(row["legalTime"]);		$("#extendInsuredNumber").val(row["insuredNumber"]);		$("#extendBusinessScope").val(row["businessScope"]);		$("#extendEquityConstituent").val(row["equityConstituent"]);		$("#extendParttimeMemo").val(row["parttimeMemo"]);		$("#extendBiddingMemo").val(row["biddingMemo"]);		$("#extendLawMemo").val(row["lawMemo"]);		$('#divExtendForm').modal();	}	//修改对象	function editObject(rowIndex) {		if (dataTableObj.data().length <= 0)			return;		if (rowIndex < 0)			return;		var row = dataTableObj.data()[rowIndex];		$("#hiddenClientId").val(row["clientId"]);		$("#inputClientName").val(row["clientName"]);		$("#inputClientWeixin").val(row["clientWeixin"]);		$("#inputClientAddress").val(row["clientAddress"]);		$("#inputClientPhone").val(row["clientPhone"]);		$("#inputClientZipCode").val(row["clientZipCode"]);		$("#inputClientContacts").val(row["clientContacts"]);		$("#selectClientType").val(row["clientType"]);		$("#inputClientEmail").val(row["clientEmail"]);		$("#inputCeo").val(row["ceo"]);		$("#inputCeoPhone").val(row["ceoPhone"]);		$("#inputClientAccount").val(row["clientAccount"]);		$("#inputClientBank").val(row["clientBank"]);		$("#inputClientLevel").val(row["clientLevel"]);		$("#inputClientMemo").val(row["clientMemo"]);		$("#inputClientState").val(row["clientState"]);		$("#inputSourceTable").val(row["sourceTable"]);		$("#inputSourceMemo").val(row["sourceMemo"]);		$("#inputLegalRepresentative").val(row["legalRepresentative"]);		$("#inputLegalMoney").val(row["legalMoney"]);		$("#inputLegalTime").val(row["legalTime"]);		$("#inputInsuredNumber").val(row["insuredNumber"]);		$("#inputBusinessScope").val(row["businessScope"]);		$("#inputRegisterTime").val(row["registerTime"]);		$("#inputEquityConstituent").val(row["equityConstituent"]);		$("#inputParttimeMemo").val(row["parttimeMemo"]);		$("#inputBiddingMemo").val(row["biddingMemo"]);		$("#inputLawMemo").val(row["lawMemo"]);		$('#divInputForm').modal();	}	//提交对象	function postObject() {		var obj=new Object();		obj.clientId =$("#hiddenClientId").val();		obj.clientName=$("#inputClientName").val();		obj.clientWeixin=$("#inputClientWeixin").val();		obj.clientAddress=$("#inputClientAddress").val();		obj.clientPhone=$("#inputClientPhone").val();		obj.clientZipCode=$("#inputClientZipCode").val();		obj.clientContacts=$("#inputClientContacts").val();		obj.clientType=$("#selectClientType").val();		obj.clientEmail=$("#inputClientEmail").val();		obj.ceo=$("#inputCeo").val();		obj.ceoPhone=$("#inputCeoPhone").val();		obj.clientAccount=$("#inputClientAccount").val();		obj.clientBank=$("#inputClientBank").val();		obj.clientLevel=$("#inputClientLevel").val();		obj.clientMemo=$("#inputClientMemo").val();		obj.clientState=$("#inputClientState").val();		obj.sourceMemo=$("#inputSourceMemo").val();		obj.sourceTable=$("#inputSourceTable").val();		obj.legalRepresentative=$("#inputLegalRepresentative").val();		obj.legalMoney=$("#inputLegalMoney").val();		obj.legalTime=$("#inputLegalTime").val();		obj.insuredNumber=$("#inputInsuredNumber").val();		obj.businessScope=$("#inputBusinessScope").val();		obj.equityConstituent=$("#inputEquityConstituent").val();		obj.parttimeMemo=$("#inputParttimeMemo").val();		obj.biddingMemo=$("#inputBiddingMemo").val();		obj.lawMemo=$("#inputLawMemo").val();		var jsonStr = JSON.stringify(obj);		console.log("postObject() post:"+jsonStr);		var httpMethod="post";		if($("#hiddenClientId").val()<=0)			httpMethod="post";		else			httpMethod="put";		$.ajax({			type : httpMethod,			url : "../client/clientInfo/",			data : jsonStr,			contentType : "application/json; charset=utf-8",			async : false, //默认为true 异步			error : function() {				alert('提交失败!');			},			success : function(data) {				$('#divInputForm').modal("hide");				if (data == null || data == "") {					$.gritter.add({						title : '成功',						text : '提交已经成功!',						//sticky: false,						time : 2000,						//speed:500,						position : 'bottom-right',						class_name : 'gritter-sucess'					});					//重新加载数据					dataTableObj.ajax.reload(null, true);				} else					$.gritter.add({						title : '失败',						text : data,						//sticky: false,						time : 2000,						//speed:500,						position : 'bottom-right',						class_name : 'gritter-error'					});			}		});	}	//删除对象	function deleteObject(deleteId) {		if(deleteId<=0)			return;		$.ajax({			type : "delete",			url : "../client/clientInfo/"+deleteId,			error : function() {				showError('提交失败!');			},			success : function(data) {				const r = confirm("确定删除此信息？ ");				$('#divInputForm').modal("hide");				if (r) {					if (data == null || data == "") {						showSuccess('已经删除成功!');						//重新加载数据						dataTableObj.ajax.reload(null, true);					} else						showError('该客户仍涉及业务,无法删除');				}			}		});	}	//导入excel	$('#btnImport').on('click', function(e) {		$('#divImportForm').modal();		e.preventDefault();	});	$(document).ready(function () {		$("#excelButton").click(function (e) {			var fileInput = $("#excelImport")[0].files[0];			if (fileInput) {				var formData = new FormData();				formData.append("file", fileInput);				$.ajax({					url: "../client/import", // 指定Controller的URL					type: "POST",					data: formData,					processData: false,					contentType: false,					success: function (data) {						if (data == null || data == "") {							$.gritter.add({								title: '成功',								text: '提交已经成功!',								sticky: false,								time: 1000,								//speed:500,								position: 'bottom-right',								class_name: 'gritter-sucess'							});						}else {							$.gritter.add({								title : '以下客户导入失败，由于姓名或者电话在系统里面已经存在',								text : data,								//sticky: false,								time : 2000,								//speed:500,								position : 'bottom-right',								class_name : 'gritter-error'							});						}						//重新加载数据						dataTableObj.ajax.reload(null, true);					},					error: function (error) {						// 处理错误响应						showError('文件上传失败');						dataTableObj.ajax.reload(null, true);						// 在此处处理错误后的逻辑，如显示错误消息					}				});			}			e.preventDefault(); //阻止默认事件Post		});	});	//客户关联	function clientRelation(rowIndex){		console.log("clientRelation("+rowIndex+") is clicked");		if (dataTableObj.data().length <= 0)			return;		if (rowIndex < 0)			return;		var row = dataTableObj.data()[rowIndex];		var strUrl="../client/clientRelationPage/"+row["clientId"];		console.log(strUrl+" is open");		showPageContent(strUrl,row["clientName"]+"客户关联");	}	//客户跟进	function clientFollow(rowIndex){		console.log("clientFollow("+rowIndex+") is clicked");		if (dataTableObj.data().length <= 0)			return;		if (rowIndex < 0)			return;		var row = dataTableObj.data()[rowIndex];		var strUrl="../client/clientFollowPage/"+row["clientId"];		console.log(strUrl+" is open");		showPageContent(strUrl,row["clientName"]+"客户跟进");	}	//客户回访	function clientRevisit(rowIndex){		console.log("clientRevisit("+rowIndex+") is clicked");		if (dataTableObj.data().length <= 0)			return;		if (rowIndex < 0)			return;		var row = dataTableObj.data()[rowIndex];		var strUrl="../client/clientRevisitPage/"+row["clientId"];		console.log(strUrl+" is open");		showPageContent(strUrl,row["clientName"]+"客户回访");	}	$('#queryRegisterTimeBegin').datetimepicker({		format : "YYYY-MM-DD HH:mm:ss"	}).on('changeDate', function(ev) {		$(this).datetimepicker('hide');	});	$('#queryRegisterTimeEnd').datetimepicker({		format : "YYYY-MM-DD HH:mm:ss"	}).on('changeDate', function(ev) {		$(this).datetimepicker('hide');	});</script>